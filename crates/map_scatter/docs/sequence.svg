<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1410px" preserveAspectRatio="none" style="width:2091px;height:1410px;background:#FFFFFF;" version="1.1" viewBox="0 0 2091 1410" width="2091px" zoomAndPan="magnify"><defs/><g><g><title>FieldRuntime</title><rect fill="#FFFFFF" height="317.3281" style="stroke:#181818;stroke-width:1;" width="10" x="1759.4858" y="812.1563"/></g><rect fill="none" height="302.1328" style="stroke:#000000;stroke-width:1.5;" width="760.2769" x="857.0195" y="481.8906"/><rect fill="none" height="241.8672" style="stroke:#000000;stroke-width:1.5;" width="740.2769" x="867.0195" y="535.1563"/><rect fill="none" height="252.1953" style="stroke:#000000;stroke-width:1.5;" width="1357.2837" x="716.8965" y="870.2891"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="1100.8071" x="726.8965" y="952.6875"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="24.2651" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.2969" y2="1226.8828"/></g><g><title>ScatterRunner</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="256.2842" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="259.6709" x2="259.6709" y1="81.2969" y2="1226.8828"/></g><g><title>Plan</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="443.457" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="446.5649" x2="446.5649" y1="81.2969" y2="1226.8828"/></g><g><title>Kind</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="555.9434" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="559.5283" x2="559.5283" y1="81.2969" y2="1226.8828"/></g><g><title>PositionSampling</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="655.6274" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="659.3584" x2="659.3584" y1="81.2969" y2="1226.8828"/></g><g><title>TextureRegistry</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="797.958" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="801.8965" x2="801.8965" y1="81.2969" y2="1226.8828"/></g><g><title>Evaluator</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="913.4507" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="917.0195" x2="917.0195" y1="81.2969" y2="1226.8828"/></g><g><title>FieldProgramCache</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1111.4463" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1115.1997" x2="1115.1997" y1="81.2969" y2="1226.8828"/></g><g><title>FieldGraphCompiler</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1269.3374" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1272.6929" x2="1272.6929" y1="81.2969" y2="1226.8828"/></g><g><title>FieldGraphSpec</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1414.1616" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1417.9819" x2="1417.9819" y1="81.2969" y2="1226.8828"/></g><g><title>FieldProgram</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1537.8188" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1541.3413" x2="1541.3413" y1="81.2969" y2="1226.8828"/></g><g><title>FieldRuntime</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1760.4858" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1764.2681" x2="1764.2681" y1="81.2969" y2="1226.8828"/></g><g><title>ChunkGrid / ChunkId</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="1905.2124" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1908.7036" x2="1908.7036" y1="81.2969" y2="1226.8828"/></g><g><title>Raster</title><rect fill="#000000" fill-opacity="0.00000" height="1145.5859" width="8" x="2028.4507" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2031.7212" x2="2031.7212" y1="81.2969" y2="1226.8828"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="77.9951">Client</text><ellipse cx="28.2651" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28.2651,21.5 L28.2651,48.5 M15.2651,29.5 L41.2651,29.5 M28.2651,48.5 L15.2651,63.5 M28.2651,48.5 L41.2651,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="1238.8779">Client</text><ellipse cx="28.2651" cy="1250.6797" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28.2651,1258.6797 L28.2651,1285.6797 M15.2651,1266.6797 L41.2651,1266.6797 M28.2651,1285.6797 L15.2651,1300.6797 M28.2651,1285.6797 L41.2651,1300.6797" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ScatterRunner"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.2266" x="202.6709" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.2266" x="209.6709" y="69.9951">ScatterRunner</text></g><g class="participant participant-tail" data-participant="ScatterRunner"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115.2266" x="202.6709" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.2266" x="209.6709" y="1245.8779">ScatterRunner</text></g><g class="participant participant-head" data-participant="Plan"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.7842" x="425.5649" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.7842" x="432.5649" y="69.9951">Plan</text></g><g class="participant participant-tail" data-participant="Plan"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.7842" x="425.5649" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.7842" x="432.5649" y="1245.8779">Plan</text></g><g class="participant participant-head" data-participant="Kind"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44.8301" x="537.5283" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.8301" x="544.5283" y="69.9951">Kind</text></g><g class="participant participant-tail" data-participant="Kind"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44.8301" x="537.5283" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.8301" x="544.5283" y="1245.8779">Kind</text></g><g class="participant participant-head" data-participant="PositionSampling"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.5381" x="592.3584" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.5381" x="599.3584" y="69.9951">PositionSampling</text></g><g class="participant participant-tail" data-participant="PositionSampling"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.5381" x="592.3584" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.5381" x="599.3584" y="1245.8779">PositionSampling</text></g><g class="participant participant-head" data-participant="Textures"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="126.123" x="740.8965" y="46"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="126.123" x="736.8965" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.123" x="743.8965" y="69.9951">TextureRegistry</text></g><g class="participant participant-tail" data-participant="Textures"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="126.123" x="740.8965" y="1225.8828"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="126.123" x="736.8965" y="1229.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.123" x="743.8965" y="1249.8779">TextureRegistry</text></g><g class="participant participant-head" data-participant="Evaluator"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8623" x="877.0195" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8623" x="884.0195" y="69.9951">Evaluator</text></g><g class="participant participant-tail" data-participant="Evaluator"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8623" x="877.0195" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8623" x="884.0195" y="1245.8779">Evaluator</text></g><g class="participant participant-head" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.4932" x="1044.1997" y="77.9951">FieldProgramCache</text><path d="M1097.4463,29 C1097.4463,19 1115.4463,19 1115.4463,19 C1115.4463,19 1133.4463,19 1133.4463,29 L1133.4463,55 C1133.4463,65 1115.4463,65 1115.4463,65 C1115.4463,65 1097.4463,65 1097.4463,55 L1097.4463,29" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1097.4463,29 C1097.4463,39 1115.4463,39 1115.4463,39 C1115.4463,39 1133.4463,39 1133.4463,29" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.4932" x="1044.1997" y="1238.8779">FieldProgramCache</text><path d="M1097.4463,1252.1797 C1097.4463,1242.1797 1115.4463,1242.1797 1115.4463,1242.1797 C1115.4463,1242.1797 1133.4463,1242.1797 1133.4463,1252.1797 L1133.4463,1278.1797 C1133.4463,1288.1797 1115.4463,1288.1797 1115.4463,1288.1797 C1115.4463,1288.1797 1097.4463,1288.1797 1097.4463,1278.1797 L1097.4463,1252.1797" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1097.4463,1252.1797 C1097.4463,1262.1797 1115.4463,1262.1797 1115.4463,1262.1797 C1115.4463,1262.1797 1133.4463,1262.1797 1133.4463,1252.1797" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-head" data-participant="Compiler"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2891" x="1196.6929" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2891" x="1203.6929" y="69.9951">FieldGraphCompiler</text></g><g class="participant participant-tail" data-participant="Compiler"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.2891" x="1196.6929" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.2891" x="1203.6929" y="1245.8779">FieldGraphCompiler</text></g><g class="participant participant-head" data-participant="Spec"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3594" x="1359.9819" y="77.9951">FieldGraphSpec</text><ellipse cx="1418.1616" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1406.1616" x2="1430.1616" y1="63" y2="63"/></g><g class="participant participant-tail" data-participant="Spec"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3594" x="1359.9819" y="1238.8779">FieldGraphSpec</text><ellipse cx="1418.1616" cy="1258.1797" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1406.1616" x2="1430.1616" y1="1272.1797" y2="1272.1797"/></g><g class="participant participant-head" data-participant="Program"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="106.9551" x="1490.3413" y="46"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="106.9551" x="1486.3413" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.9551" x="1493.3413" y="69.9951">FieldProgram</text></g><g class="participant participant-tail" data-participant="Program"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="106.9551" x="1490.3413" y="1225.8828"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="106.9551" x="1486.3413" y="1229.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.9551" x="1493.3413" y="1249.8779">FieldProgram</text></g><g class="participant participant-head" data-participant="Runtime"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106.4355" x="1711.2681" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.4355" x="1718.2681" y="69.9951">FieldRuntime</text></g><g class="participant participant-tail" data-participant="Runtime"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106.4355" x="1711.2681" y="1225.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.4355" x="1718.2681" y="1245.8779">FieldRuntime</text></g><g class="participant participant-head" data-participant="Grid"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1831.7036" y="46"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1827.7036" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0176" x="1834.7036" y="69.9951">ChunkGrid / ChunkId</text></g><g class="participant participant-tail" data-participant="Grid"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1831.7036" y="1225.8828"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="159.0176" x="1827.7036" y="1229.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145.0176" x="1834.7036" y="1249.8779">ChunkGrid / ChunkId</text></g><g class="participant participant-head" data-participant="Raster"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="59.459" x="2004.7212" y="46"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="59.459" x="2000.7212" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.459" x="2007.7212" y="69.9951">Raster</text></g><g class="participant participant-tail" data-participant="Raster"><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="59.459" x="2004.7212" y="1225.8828"/><rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="59.459" x="2000.7212" y="1229.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.459" x="2007.7212" y="1249.8779">Raster</text></g><g><title>FieldRuntime</title><rect fill="#FFFFFF" height="317.3281" style="stroke:#181818;stroke-width:1;" width="10" x="1759.4858" y="812.1563"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2084.1802" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="69.6499" x="1007.2651" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="51.124" x="1013.2651" y="117.3638">Kickoff</text><g class="message" data-participant-1="Client" data-participant-2="ScatterRunner"><polygon fill="#181818" points="248.2842,151.5625,258.2842,155.5625,248.2842,159.5625,252.2842,155.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="28.2651" x2="254.2842" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.019" x="35.2651" y="150.4966">run(kindId, opts, base_textures)</text></g><path d="M265,168.5625 L265,193.5625 L521,193.5625 L521,178.5625 L511,168.5625 L265,168.5625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M511,168.5625 L511,178.5625 L521,178.5625 L511,168.5625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235.0474" x="271" y="185.6294">Orchestrates sampling + evaluation</text><g class="message" data-participant-1="ScatterRunner" data-participant-2="Plan"><polygon fill="#181818" points="435.457,215.8281,445.457,219.8281,435.457,223.8281,439.457,219.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="260.2842" x2="441.457" y1="219.8281" y2="219.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.1729" x="267.2842" y="214.7622">prepare(strategy, layers)</text></g><g class="message" data-participant-1="Plan" data-participant-2="Kind"><polygon fill="#181818" points="547.9434,244.9609,557.9434,248.9609,547.9434,252.9609,551.9434,248.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="447.457" x2="553.9434" y1="248.9609" y2="248.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.4863" x="454.457" y="243.895">select(kindId)</text></g><g class="message" data-participant-1="Kind" data-participant-2="Plan"><polygon fill="#181818" points="458.457,274.0938,448.457,278.0938,458.457,282.0938,454.457,278.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="452.457" x2="558.9434" y1="278.0938" y2="278.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.6279" x="464.457" y="273.0278">Kind</text></g><g class="message" data-participant-1="Plan" data-participant-2="ScatterRunner"><polygon fill="#181818" points="271.2842,303.2266,261.2842,307.2266,271.2842,311.2266,267.2842,307.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="265.2842" x2="446.457" y1="307.2266" y2="307.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.0693" x="277.2842" y="302.1606">plan</text></g><g class="message" data-participant-1="ScatterRunner" data-participant-2="Textures"><polygon fill="#181818" points="789.958,332.3594,799.958,336.3594,789.958,340.3594,793.958,336.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="260.2842" x2="795.958" y1="336.3594" y2="336.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.293" x="267.2842" y="331.2935">register(base_textures)</text></g><g class="message" data-participant-1="ScatterRunner" data-participant-2="PositionSampling"><polygon fill="#181818" points="647.6274,361.4922,657.6274,365.4922,647.6274,369.4922,651.6274,365.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="260.2842" x2="653.6274" y1="365.4922" y2="365.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.3735" x="267.2842" y="360.4263">generate_positions(plan.sampling)</text></g><g class="message" data-participant-1="PositionSampling" data-participant-2="ScatterRunner"><polygon fill="#181818" points="271.2842,390.625,261.2842,394.625,271.2842,398.625,267.2842,394.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="265.2842" x2="658.6274" y1="394.625" y2="394.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.2651" x="277.2842" y="389.5591">positions</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2084.1802" x="0" y="423.1914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="423.1914" y2="423.1914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="426.1914" y2="426.1914"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="82.1675" x="1001.0063" y="412.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63.6416" x="1007.0063" y="428.6919">Evaluate</text><g class="message" data-participant-1="ScatterRunner" data-participant-2="Evaluator"><polygon fill="#181818" points="905.4507,462.8906,915.4507,466.8906,905.4507,470.8906,909.4507,466.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="260.2842" x2="911.4507" y1="466.8906" y2="466.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.561" x="267.2842" y="461.8247">evaluate(positions, Kind, opts, Textures)</text></g><path d="M857.0195,481.8906 L1088.4375,481.8906 L1088.4375,489.0234 L1078.4375,499.0234 L857.0195,499.0234 L857.0195,481.8906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="302.1328" style="stroke:#000000;stroke-width:1.5;" width="760.2769" x="857.0195" y="481.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186.418" x="872.0195" y="494.9575">Resolve/compile program</text><g class="message" data-participant-1="Evaluator" data-participant-2="Cache"><polygon fill="#181818" points="1103.4463,516.1563,1113.4463,520.1563,1103.4463,524.1563,1107.4463,520.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="917.4507" x2="1109.4463" y1="520.1563" y2="520.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.9956" x="924.4507" y="515.0903">get_or_compile(Kind, opts)</text></g><path d="M867.0195,535.1563 L931.4624,535.1563 L931.4624,542.2891 L921.4624,552.2891 L867.0195,552.2891 L867.0195,535.1563" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="241.8672" style="stroke:#000000;stroke-width:1.5;" width="740.2769" x="867.0195" y="535.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="882.0195" y="548.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="66.4995" x="946.4624" y="547.3667">[cache hit]</text><g class="message" data-participant-1="Cache" data-participant-2="Evaluator"><polygon fill="#181818" points="928.4507,572.4219,918.4507,576.4219,928.4507,580.4219,924.4507,576.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="922.4507" x2="1114.4463" y1="576.4219" y2="576.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.3643" x="934.4507" y="571.356">Program</text></g><path d="M1120,557.2891 L1120,582.2891 L1335,582.2891 L1335,567.2891 L1325,557.2891 L1120,557.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1325,557.2891 L1325,567.2891 L1335,567.2891 L1325,557.2891" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.1113" x="1126" y="574.356">Reuse compiled FieldProgram</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="867.0195" x2="1607.2964" y1="588.4219" y2="588.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77.9668" x="872.0195" y="598.6323">[cache miss]</text><g class="message" data-participant-1="Cache" data-participant-2="Compiler"><polygon fill="#181818" points="1261.3374,619.3594,1271.3374,623.3594,1261.3374,627.3594,1265.3374,623.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1115.4463" x2="1267.3374" y1="623.3594" y2="623.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3501" x="1122.4463" y="618.2935">compile(Kind, opts)</text></g><g class="message" data-participant-1="Compiler" data-participant-2="Spec"><polygon fill="#181818" points="1406.1616,648.4922,1416.1616,652.4922,1406.1616,656.4922,1410.1616,652.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1273.3374" x2="1412.1616" y1="652.4922" y2="652.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3325" x="1280.3374" y="647.4263">read(Kind)</text></g><g class="message" data-participant-1="Spec" data-participant-2="Compiler"><polygon fill="#181818" points="1284.3374,677.625,1274.3374,681.625,1284.3374,685.625,1280.3374,681.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1278.3374" x2="1417.1616" y1="681.625" y2="681.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.2368" x="1290.3374" y="676.5591">field graph</text></g><g class="message" data-participant-1="Compiler" data-participant-2="Program"><polygon fill="#181818" points="1529.8188,706.7578,1539.8188,710.7578,1529.8188,714.7578,1533.8188,710.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1273.3374" x2="1535.8188" y1="710.7578" y2="710.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.7769" x="1280.3374" y="705.6919">program</text></g><g class="message" data-participant-1="Compiler" data-participant-2="Cache"><polygon fill="#181818" points="1126.4463,735.8906,1116.4463,739.8906,1126.4463,743.8906,1122.4463,739.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1120.4463" x2="1272.3374" y1="739.8906" y2="739.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.3643" x="1132.4463" y="734.8247">Program</text></g><g class="message" data-participant-1="Cache" data-participant-2="Evaluator"><polygon fill="#181818" points="928.4507,765.0234,918.4507,769.0234,928.4507,773.0234,924.4507,769.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="922.4507" x2="1114.4463" y1="769.0234" y2="769.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.3643" x="934.4507" y="763.9575">Program</text></g><g class="message" data-participant-1="Evaluator" data-participant-2="Runtime"><polygon fill="#181818" points="1747.4858,808.1563,1757.4858,812.1563,1747.4858,816.1563,1751.4858,812.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="917.4507" x2="1753.4858" y1="812.1563" y2="812.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.4087" x="924.4507" y="807.0903">create(Program, Textures)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2084.1802" x="0" y="840.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="840.7227" y2="840.7227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2084.1802" y1="843.7227" y2="843.7227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="188.1353" x="948.0225" y="830.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169.6094" x="954.0225" y="846.2231">Runtime interpretation</text><path d="M716.8965,870.2891 L793.5205,870.2891 L793.5205,877.4219 L783.5205,887.4219 L716.8965,887.4219 L716.8965,870.2891" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="252.1953" style="stroke:#000000;stroke-width:1.5;" width="1357.2837" x="716.8965" y="870.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="731.8965" y="883.356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197.1514" x="808.5205" y="882.4995">[for each chunk in Grid domain]</text><g class="message" data-participant-1="Runtime" data-participant-2="Grid"><polygon fill="#181818" points="1897.2124,904.5547,1907.2124,908.5547,1897.2124,912.5547,1901.2124,908.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1769.4858" x2="1903.2124" y1="908.5547" y2="908.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.0649" x="1776.4858" y="903.4888">next_chunk()</text></g><g class="message" data-participant-1="Grid" data-participant-2="Runtime"><polygon fill="#181818" points="1780.4858,933.6875,1770.4858,937.6875,1780.4858,941.6875,1776.4858,937.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1774.4858" x2="1908.2124" y1="937.6875" y2="937.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.4092" x="1786.4858" y="932.6216">ChunkId</text></g><path d="M726.8965,952.6875 L803.5205,952.6875 L803.5205,959.8203 L793.5205,969.8203 L726.8965,969.8203 L726.8965,952.6875" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="1100.8071" x="726.8965" y="952.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="741.8965" y="965.7544">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164.8657" x="818.5205" y="964.8979">[for each field in Program]</text><g class="message" data-participant-1="Runtime" data-participant-2="Program"><polygon fill="#181818" points="1552.8188,986.9531,1542.8188,990.9531,1552.8188,994.9531,1548.8188,990.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1546.8188" x2="1758.4858" y1="990.9531" y2="990.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.667" x="1558.8188" y="985.8872">eval(field, ChunkId, positions)</text></g><g class="message" data-participant-1="Program" data-participant-2="Runtime"><polygon fill="#181818" points="1747.4858,1016.0859,1757.4858,1020.0859,1747.4858,1024.0859,1751.4858,1020.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1541.8188" x2="1753.4858" y1="1020.0859" y2="1020.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.9951" x="1548.8188" y="1015.02">expression/ops</text></g><g class="message" data-participant-1="Runtime" data-participant-2="Textures"><polygon fill="#181818" points="812.958,1045.2188,802.958,1049.2188,812.958,1053.2188,808.958,1049.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="806.958" x2="1758.4858" y1="1049.2188" y2="1049.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1606" x="818.958" y="1044.1528">sample(tex, uv/xy)</text></g><g class="message" data-participant-1="Textures" data-participant-2="Runtime"><polygon fill="#181818" points="1747.4858,1074.3516,1757.4858,1078.3516,1747.4858,1082.3516,1751.4858,1078.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="801.958" x2="1753.4858" y1="1078.3516" y2="1078.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.1812" x="808.958" y="1073.2856">sample(s)</text></g><g class="message" data-participant-1="Runtime" data-participant-2="Raster"><polygon fill="#181818" points="2020.4507,1110.4844,2030.4507,1114.4844,2020.4507,1118.4844,2024.4507,1114.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1769.4858" x2="2026.4507" y1="1114.4844" y2="1114.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.0264" x="1776.4858" y="1109.4185">bake(field values, ChunkId)</text></g><g class="message" data-participant-1="Runtime" data-participant-2="Evaluator"><polygon fill="#181818" points="928.4507,1146.6172,918.4507,1150.6172,928.4507,1154.6172,924.4507,1150.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="922.4507" x2="1763.4858" y1="1150.6172" y2="1150.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.2124" x="934.4507" y="1145.5513">Raster set</text></g><g class="message" data-participant-1="Evaluator" data-participant-2="ScatterRunner"><polygon fill="#181818" points="271.2842,1175.75,261.2842,1179.75,271.2842,1183.75,267.2842,1179.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="265.2842" x2="916.4507" y1="1179.75" y2="1179.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.6738" x="277.2842" y="1174.6841">evaluated positions + rasters</text></g><g class="message" data-participant-1="ScatterRunner" data-participant-2="Client"><polygon fill="#181818" points="39.2651,1204.8828,29.2651,1208.8828,39.2651,1212.8828,35.2651,1208.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.2651" x2="259.2842" y1="1208.8828" y2="1208.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.9155" x="45.2651" y="1203.8169">result (scatter data + artifacts)</text></g><rect fill="#DDDDDD" height="75.1875" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="620.6611" x="1450.519" y="1315.1797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="405.6377" x="1455.519" y="1333.1748">- Plan selects a Kind and defines sampling strategy/layers</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="489.0498" x="1455.519" y="1349.4717">- Cache avoids recompilation by storing FieldProgram per (Kind, opts)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="358.2236" x="1455.519" y="1365.7686">- On miss, Compiler reads Spec and emits Program</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="610.6611" x="1455.519" y="1382.0654">- Runtime interprets Program, samples Textures, and bakes per field/chunk into Raster</text><!--SRC=[TLPDRzim3BthLn0vkPYzt8srbs8hYXrQjBq7ggquGXpBaEIW-VSZAVb3TdSe44iK-SJt7bLPUMFXiTMgyqBqqdfTwLvs7juhwRsoRqFNAPlilBQoInR-wgvE8upJNflkNLxwLdUDg4pRgegM77oeBpzOvK0wsCMFDzLev-rjbsBuVPNj816XgAMNdz8fU9JLIV7HFrgrzQirZPKNNjqbPn_DfTUjidFiavNzQLpU2RonzZTuxrMrYg6bNO8vbjdKJKjYhxo-BD35XJJNazKrXpoUXkxCNtlWtyzr6lac7J8WnFqzjhWwc-CHxk-526n1yP1oL88TkkoCN3pNEPZUknoePGSV6tudEkCLMDsSF9ZZYc605ujDH1QaHt9Sf0v-W0ei82JiMGsKH8ZaC64XLPJGMuKTKLb8qznoQELDMQnD-nH7OYd1ARfbH7idQ16AAGiBAXpOth8d-MthZxB2Dh2ObCrMjzz2NicqX4RX5W8_z77BPLJkvzWDlCRgpBS8nyDCNHInOkus62Q9bsEVLJQTpxaJ8vaVqqr4OytGmvjofhsgVHKqZSrdKIALKrOgmUQWk_c3iOSOdCsPx_20R3rKRAsJzlWDqMX52l5rgW0mYua_0U4CQD2OluQbJpXY4W_-R2cIAroqSyk23vDpI_WUAypUfjwZMObpMNDO261J5qck8y61Xlozoa5A233BHGj7GB-AOf7bTRF_tmxXTSalGYHan960TqF8o7MCNx8hqVvN4aoCPHMDiqLtA1zqcMT3igPQOteuOdg5WA2YIO9XOSxKvY9rXsZ6ymY1DaheiDw1WpFg6KSNIu1n90dSJ2k4JcA5PJCM-QTcag0pZix7RFbiZi3KE5cJqkeBR-WSHkrDxzRvPwUpBLM65izXkEw_RY7dzC8aIMCmrsLUagHXrfOuCSygO0QYJRa9-brWirORVgOqgHH2IXnrVYc1xRWOVL_FlS6fQ_cqMqyCqZJFVzAy6z2scGiHG6ya7gG7wOWOQKwqgY7NZIujUBx6uOiFC8yNaFXNgwFkbcD_7E3xCB_vS7nxhqRN3gi7TmOTVjxmXB5qSkbxw17Nohu5l7Ji-dps8DdNnQSOqQYBzcuXhs8h_saxZyJE_rZad8E8T5oVsToFll1cV5UnCw4_uXy0]--></g></svg>